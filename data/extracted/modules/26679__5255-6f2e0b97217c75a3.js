function(e,t,r){"use strict";let n,i;r.d(t,{a:function(){return k},c:function(){return C},e:function(){return R},f:function(){return I},g:function(){return A}});var o=r(20307),a=r(47543),s=r(25566);class u extends Error{constructor(e,t){super(e),this.name="FetchError",Object.setPrototypeOf(this,u.prototype),t&&(this.response=t.response,this.request=t.request,this.status=t.status,this.statusText=t.statusText,this.config=t.config,this.code=t.code)}}let l=/\{[^{}]+\}/g,c=()=>{var e,t;return"object"==typeof s&&Number.parseInt(null==(t=null==(e=null==s?void 0:s.versions)?void 0:e.node)?void 0:t.substring(0,2))>=18&&s.versions.undici};function d(e,t,r){if(null==t)return"";if("object"==typeof t)throw Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${(null==r?void 0:r.allowReserved)===!0?t:encodeURIComponent(t)}`}function f(e,t,r){if(!t||"object"!=typeof t)return"";let n=[],i={simple:",",label:".",matrix:";"}[r.style]||"&";if("deepObject"!==r.style&&!1===r.explode){for(let e in t)n.push(e,!0===r.allowReserved?t[e]:encodeURIComponent(t[e]));let i=n.join(",");switch(r.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(let i in t){let o="deepObject"===r.style?`${e}[${i}]`:i;n.push(d(o,t[i],r))}let o=n.join(i);return"label"===r.style||"matrix"===r.style?`${i}${o}`:o}function h(e,t,r){if(!Array.isArray(t))return"";if(!1===r.explode){let n={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[r.style]||",",i=(!0===r.allowReserved?t:t.map(e=>encodeURIComponent(e))).join(n);switch(r.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}let n={simple:",",label:".",matrix:";"}[r.style]||"&",i=[];for(let n of t)"simple"===r.style||"label"===r.style?i.push(!0===r.allowReserved?n:encodeURIComponent(n)):i.push(d(e,n,r));return"label"===r.style||"matrix"===r.style?`${n}${i.join(n)}`:i.join(n)}function p(e){return function(t){let r=[];if(t&&"object"==typeof t)for(let n in t){let i=t[n];if(null!=i){if(Array.isArray(i)){if(0===i.length)continue;r.push(h(n,i,{style:"form",explode:!0,...null==e?void 0:e.array,allowReserved:(null==e?void 0:e.allowReserved)||!1}));continue}if("object"==typeof i){r.push(f(n,i,{style:"deepObject",explode:!0,...null==e?void 0:e.object,allowReserved:(null==e?void 0:e.allowReserved)||!1}));continue}r.push(d(n,i,e))}}return r.join("&")}}function m(e,t){return e instanceof FormData?e:t&&(t.get instanceof Function?t.get("Content-Type")??t.get("content-type"):t["Content-Type"]??t["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(e).toString():JSON.stringify(e)}function g(...e){let t=new Headers;for(let r of e)if(r&&"object"==typeof r)for(let[e,n]of r instanceof Headers?r.entries():Object.entries(r))if(null===n)t.delete(e);else if(Array.isArray(n))for(let r of n)t.append(e,r);else void 0!==n&&t.set(e,n);return t}function b(e){return e.endsWith("/")?e.substring(0,e.length-1):e}class y{constructor(e={}){var t;this.requestInterceptors=[],this.responseInterceptors=[],this.pendingBody=null,this.baseUrl=e.baseUrl,this.credentials=e.credentials??"same-origin",this.rewriteRules=e.rewriteRules??{};let r=e.bodySerializer;try{this.client=function(e){let{baseUrl:t="",Request:r=globalThis.Request,fetch:n=globalThis.fetch,querySerializer:i,bodySerializer:o,headers:a,requestInitExt:s,...u}={...e};s=c()?s:void 0,t=b(t);let y=[];async function v(e,c){var v,w;let _,x;let{baseUrl:E,fetch:S=n,Request:k=r,headers:A,params:C={},parseAs:O="json",querySerializer:M,bodySerializer:I=o??m,body:T,middleware:N=[],...R}=c||{},P=t;E&&(P=b(E)??t);let L="function"==typeof i?i:p(i);M&&(L="function"==typeof M?M:p({..."object"==typeof i?i:{},...M}));let j=void 0===T?void 0:I(T,g(a,A,C.header)),D=g(void 0===j||j instanceof FormData?{}:{"Content-Type":"application/json"},a,A,C.header),F=[...y,...N],B={redirect:"follow",...u,...R,body:j,headers:D},$,U,z=new k((v={baseUrl:P,params:C,querySerializer:L},_=`${v.baseUrl}${e}`,null!=(w=v.params)&&w.path&&(_=function(e,t){let r=e;for(let n of e.match(l)??[]){let e=n.substring(1,n.length-1),i=!1,o="simple";if(e.endsWith("*")&&(i=!0,e=e.substring(0,e.length-1)),e.startsWith(".")?(o="label",e=e.substring(1)):e.startsWith(";")&&(o="matrix",e=e.substring(1)),!t||void 0===t[e]||null===t[e])continue;let a=t[e];if(Array.isArray(a)){r=r.replace(n,h(e,a,{style:o,explode:i}));continue}if("object"==typeof a){r=r.replace(n,f(e,a,{style:o,explode:i}));continue}if("matrix"===o){r=r.replace(n,`;${d(e,a)}`);continue}r=r.replace(n,"label"===o?`.${encodeURIComponent(a)}`:encodeURIComponent(a))}return r}(_,v.params.path)),(x=v.querySerializer(v.params.query??{})).startsWith("?")&&(x=x.substring(1)),x&&(_+=`?${x}`),_),B),q;for(let e in R)e in z||(z[e]=R[e]);if(F.length){for(let t of($=Math.random().toString(36).slice(2,11),U=Object.freeze({baseUrl:P,fetch:S,parseAs:O,querySerializer:L,bodySerializer:I}),F))if(t&&"object"==typeof t&&"function"==typeof t.onRequest){let r=await t.onRequest({request:z,schemaPath:e,params:C,options:U,id:$});if(r){if(r instanceof k)z=r;else if(r instanceof Response){q=r;break}else throw Error("onRequest: must return new Request() or Response() when modifying the request")}}}if(!q){try{q=await S(z,s)}catch(r){let t=r;if(F.length)for(let r=F.length-1;r>=0;r--){let n=F[r];if(n&&"object"==typeof n&&"function"==typeof n.onError){let r=await n.onError({request:z,error:t,schemaPath:e,params:C,options:U,id:$});if(r){if(r instanceof Response){t=void 0,q=r;break}if(r instanceof Error){t=r;continue}throw Error("onError: must return new Response() or instance of Error")}}}if(t)throw t}if(F.length)for(let t=F.length-1;t>=0;t--){let r=F[t];if(r&&"object"==typeof r&&"function"==typeof r.onResponse){let t=await r.onResponse({request:z,response:q,schemaPath:e,params:C,options:U,id:$});if(t){if(!(t instanceof Response))throw Error("onResponse: must return new Response() when modifying the response");q=t}}}}if(204===q.status||"HEAD"===z.method||"0"===q.headers.get("Content-Length"))return q.ok?{data:void 0,response:q}:{error:void 0,response:q};if(q.ok)return"stream"===O?{data:q.body,response:q}:{data:await q[O](),response:q};let W=await q.text();try{W=JSON.parse(W)}catch{}return{error:W,response:q}}return{request:(e,t,r)=>v(t,{...r,method:e.toUpperCase()}),GET:(e,t)=>v(e,{...t,method:"GET"}),PUT:(e,t)=>v(e,{...t,method:"PUT"}),POST:(e,t)=>v(e,{...t,method:"POST"}),DELETE:(e,t)=>v(e,{...t,method:"DELETE"}),OPTIONS:(e,t)=>v(e,{...t,method:"OPTIONS"}),HEAD:(e,t)=>v(e,{...t,method:"HEAD"}),PATCH:(e,t)=>v(e,{...t,method:"PATCH"}),TRACE:(e,t)=>v(e,{...t,method:"TRACE"}),use(...e){for(let t of e)if(t){if("object"!=typeof t||!("onRequest"in t||"onResponse"in t||"onError"in t))throw Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");y.push(t)}},eject(...e){for(let t of e){let e=y.indexOf(t);-1!==e&&y.splice(e,1)}}}}({baseUrl:e.baseUrl,headers:e.headers,querySerializer:e.querySerializer,bodySerializer:e=>{let t=r?r(e):JSON.stringify(e);return this.pendingBody=t,t},fetch:this.interceptedFetch.bind(this)})}catch(e){throw(null==e?void 0:e.code)==="MODULE_NOT_FOUND"&&null!=(t=null==e?void 0:e.message)&&t.includes("openapi-fetch")?Error("openapi-fetch is required as a peer dependency. Please install it: npm install openapi-fetch"):e}}applyUrlRewrite(e){var t;if(0===Object.keys(this.rewriteRules).length)return e;let r="u">typeof window&&null!=(t=window.location)&&t.origin?window.location.origin:"http://localhost",n=this.baseUrl;!n||n.startsWith("http://")||n.startsWith("https://")||(n=new URL(n,r).toString());let i=n?new URL(n).pathname:"";n&&!n.endsWith("/")&&(n+="/");let o=e;n&&e.startsWith("/")&&(o=e.slice(1));let a=new URL(o,n||r),s=a.pathname,u=s;for(let[e,t]of(i&&"/"!==i&&s.startsWith(i)&&((u=s.slice(i.length)).startsWith("/")||(u="/"+u)),Object.entries(this.rewriteRules).sort(([e],[t])=>t.length-e.length)))if(u.startsWith(e)){u=t+u.slice(e.length);break}return s=i&&"/"!==i?i+(u.startsWith("/")?u:"/"+u):u,a.pathname=s,a.toString()}async parseAndAttach(e){let t;let r=e.headers.get("content-type")||"";try{r.includes("application/json")?t=await e.clone().json():(r.startsWith("text/"),t=await e.clone().text())}catch{t=void 0}return e.data=t,e}makeHTTPError(e,t,r){return new u(`Request failed with status code ${e.status}`,{response:e,request:r,status:e.status,statusText:e.statusText,config:{baseUrl:this.baseUrl,url:t},code:"ERR_BAD_RESPONSE"})}async interceptedFetch(e,t){let r;let n="string"==typeof e?e:e instanceof URL?e.toString():e.url,i=this.applyUrlRewrite(n);if(!t&&e instanceof Request){let t={};e.headers.forEach((e,r)=>{t[r]=e}),r={method:e.method,headers:t,body:e.body,credentials:this.credentials}}else r={...t,credentials:this.credentials};if(this.pendingBody){let e=r.body instanceof ReadableStream;(!r.body||null===r.body||e)&&(r.body=this.pendingBody),this.pendingBody=null}r.body&&(r.duplex="half");let o=r;for(let e of this.requestInterceptors){let t=await e(i,o);"duplex"in(o={...t,body:t.body??o.body})||!o.body||(o.duplex="half")}try{let e=await fetch(i,o);if(!e.ok){let t=await this.parseAndAttach(e);throw this.makeHTTPError(t,i,o)}let t=await this.parseAndAttach(e);for(let e of this.responseInterceptors)t=await e(t,i,o);return t}catch(e){if(this.errorInterceptor){let t=await this.errorInterceptor(e,i,o);if(t instanceof Response){let e=await this.parseAndAttach(t);for(let t of this.responseInterceptors)e=await t(e,i,o);if(!e.ok)throw this.makeHTTPError(e,i,o);return e}}throw e}}addRequestInterceptor(e){return this.requestInterceptors.push(e),this}addResponseInterceptor(e){return this.responseInterceptors.push(e),this}setErrorInterceptor(e){return this.errorInterceptor=e,this}get api(){return this.client}}let v={"/v1/web":"/api/web","/v1/sns":"/api/sns","/v1/backoffice":"/api/backoffice","/v1/email-auth":"/api/email","/v1/argos-kyc":"/api/kyc"},w={"/v1/limiter":"/api/limiter"},_=e=>(t,r,n)=>{let i=n.subscribe;return n.subscribe=(e,t,r)=>{let o=e;if(t){let i=(null==r?void 0:r.equalityFn)||Object.is,a=e(n.getState());o=r=>{let n=e(r);if(!i(a,n)){let e=a;t(a=n,e)}},null!=r&&r.fireImmediately&&t(a,a)}return i(o)},e(t,r,n)},x=e=>t=>{try{let r=e(t);return r instanceof Promise?r:{then:e=>x(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>x(t)(e)}}},E=(e,t)=>(r,n,i)=>{let o,a={storage:function(e,t){let r;try{r=e()}catch{return}return{getItem:e=>{var t;let n=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=r.getItem(e))?t:null;return i instanceof Promise?i.then(n):n(i)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1,u=new Set,l=new Set,c=a.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...e)},n,i);let d=()=>{let e=a.partialize({...n()});return c.setItem(a.name,{state:e,version:a.version})},f=i.setState;i.setState=(e,t)=>(f(e,t),d());let h=e((...e)=>(r(...e),d()),n,i);i.getInitialState=()=>h;let p=()=>{var e,t;if(!c)return;s=!1,u.forEach(e=>{var t;return e(null!=(t=n())?t:h)});let i=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=n())?e:h))||void 0;return x(c.getItem.bind(c))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[i,s]=e;if(r(o=a.merge(s,null!=(t=n())?t:h),!0),i)return d()}).then(()=>{null==i||i(o,void 0),o=n(),s=!0,l.forEach(e=>e(o))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},a.skipHydration||p(),o||h};class S{constructor({baseURL:e="/",preserveAuth:t,isTestMode:r}){this.refreshAuthTask=null,this.logoutCallbacks=new Set,this.lastLogoutCallbackTime=0,this.baseURL=e,this.preserveAuth=t,this.isTestMode=r,this.store=(0,a.c)(_(E(()=>({isLoading:!1,address:void 0,isLogin:!1,isLoginPending:!1,preserveAuth:t}),{name:"msu_auth_store",partialize:({isLogin:e,address:t})=>({isLogin:e,address:e?t:void 0})}))),this.fetch=N({baseUrl:this.baseURL}).client,this.fetch.addResponseInterceptor(async(e,t,r)=>{var n,i,o;if(-1!==(e.url||"").indexOf("/signin-wallet")&&e.ok){let t;try{t=null!=r&&r.body&&"string"==typeof r.body?JSON.parse(r.body):{}}catch{console.error("Failed to parse request body")}fetch("/api/web/account/client-log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectedAddress:null==t?void 0:t.address,loginAddress:null==(n=e.data)?void 0:n.address,jsonData:JSON.stringify({wat:null==(i=null==e?void 0:e.data)?void 0:i.wat,wrt:null==(o=null==e?void 0:e.data)?void 0:o.wrt})})}).catch(()=>null)}return e}),this.refreshAuthTask=O}get address(){return this.store.getState().address}get isLoading(){return this.store.getState().isLoading}get isLogin(){return this.store.getState().isLogin}get isLoginPending(){return this.store.getState().isLoginPending}get subscribe(){return this.store.subscribe}setState(e){let t="function"==typeof e?e(this.store.getState()):e;this.store.setState(t,!0)}setConfig(e){this.config=e}setIsTestMode(e){this.isTestMode=e}setParam(e){this.baseURL=(null==e?void 0:e.baseURL)??this.baseURL,this.preserveAuth=(null==e?void 0:e.preserveAuth)??this.preserveAuth,this.isTestMode=(null==e?void 0:e.isTestMode)??this.isTestMode}clearState(){this.setState(()=>({isLoading:!1,isLogin:!1,address:void 0,isLoginPending:!1}))}onLogout(e){return this.logoutCallbacks.add(e),()=>{this.logoutCallbacks.delete(e)}}async executeLogoutCallbacks(){let e=Date.now();if(e-this.lastLogoutCallbackTime<1e3)return;this.lastLogoutCallbackTime=e;let t=Array.from(this.logoutCallbacks).map(e=>Promise.resolve(e()));await Promise.all(t)}}let k=(e={})=>{let t=new S(e);return n=t,t};function A(){if(!n)throw Error("No auth config found. Ensure you have set up a config");return n}let C=async()=>{let e=A();e.isTestMode&&console.log("clearAuth called"),e.setState(()=>({isLoading:!1,isLogin:!1,address:void 0,isLoginPending:!1})),await e.executeLogoutCallbacks()},O=null,M=e=>{O=e},I=()=>{if(!O){let e=A(),t=e.baseURL,r=new o.x({baseUrl:t});r.addResponseInterceptor(async(e,r)=>{var n,i,o;let a=A();if(-1!==(e.url||"").indexOf("token/refresh-web")&&e.ok){let r=null==a?void 0:a.address;fetch(`${t.replace(/\/$/,"")}/api/web/account/client-log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectedAddress:r,loginAddress:null==(n=e.data)?void 0:n.address,jsonData:JSON.stringify({wat:null==(i=null==e?void 0:e.data)?void 0:i.wat,wrt:null==(o=null==e?void 0:e.data)?void 0:o.wrt})})}).catch(()=>null)}return e});let n=r.fetch("/api/web/token/refresh-web",{method:"POST",credentials:"include"}).then(e=>{if(!e.ok)throw Error("Token refresh failed");return e}).catch(t=>{throw M(null),e.isTestMode&&console.log("토큰 갱신 실패 인증 상태 초기화"),C(),t}).finally(()=>{setTimeout(()=>{M(null)},3e3)});M(n)}return O},T=(e,t)=>()=>{let r=t||{retryServerError:!0};return{client:e.setErrorInterceptor(async(e,t,n)=>{if(e.status){let i=e.status,o=n.__retryCount||0;if(401===i&&o<3)try{await I();let e={...n,method:n.method,headers:n.headers,body:n.body,credentials:n.credentials||"include",__retryCount:o+1},r=await fetch(t,e);if(r.ok)return r;throw Error(`Retry failed: ${r.status}`)}catch{throw e}if(i>=500&&i<600&&o<3&&null!=r&&r.retryServerError){let e=1e3*Math.pow(2,o);await new Promise(t=>setTimeout(t,e));try{let e={...n,method:n.method,headers:n.headers,body:n.body,credentials:n.credentials||"include",__retryCount:o+1},r=await fetch(t,e);if(r.ok)return r;throw Error(`Retry failed: ${r.status}`)}catch{}}}throw e}).addResponseInterceptor(async(e,t,r)=>(t.indexOf("/web/signin-wallet"),e))}};T(function(e={}){return new y(e.useRewritePaths?{baseUrl:e.baseUrl,credentials:e.credentials,headers:e.headers,querySerializer:e.querySerializer,bodySerializer:e.bodySerializer,rewriteRules:e.rewriteRules??w}:{baseUrl:e.baseUrl,credentials:e.credentials,headers:e.headers,querySerializer:e.querySerializer,bodySerializer:e.bodySerializer,rewriteRules:e.rewriteRules})}({useRewritePaths:!0}))();let N=e=>(i||(i=T(function(e={}){return new y(e.useRewritePaths?{baseUrl:e.baseUrl,credentials:e.credentials,headers:e.headers,querySerializer:e.querySerializer,bodySerializer:e.bodySerializer,rewriteRules:e.rewriteRules??v}:{baseUrl:e.baseUrl,credentials:e.credentials,headers:e.headers,querySerializer:e.querySerializer,bodySerializer:e.bodySerializer,rewriteRules:e.rewriteRules})}({useRewritePaths:!0,...e}))()),i),R=()=>{if(!i)throw Error("Account client is not initialized. Please call createInternalAccountClient first.");return i}}