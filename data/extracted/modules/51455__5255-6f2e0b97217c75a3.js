function(e,t,r){"use strict";r.d(t,{useAuth:function(){return b}});var n=r(57222),i=r(94003),o=r(55997),a=r(98284),s=r(26264),u=r(75562),l=r(26679),c=r(32063),d=r(35774),f=r(13127);r(57437);var h=r(2265),p=r(86024);r(58548);let m=async({address:e,authCode:t,baseNickname:r,ct:n,initialConsent:i,pt:o,preserveAuthState:a}={})=>{var h;let m;let g=(0,l.g)(),b=(0,p.WZ)();if(!b)throw Error("Wagmi config is not set in AuthConfig.");let y=(0,f.getWeb3AuthInstance)();if(!y)throw Error("Web3Auth instance is not available.");await y.connect(),await (0,c._)(1e3);let{address:v}=(0,s.D)(b),w=e||v;if(!w)throw Error("No connected address found for login.");let _=(0,l.e)();await _.client.api.POST("/api/web/can-signin",{body:{}});try{g.setState(e=>({...e,isLoading:!0}));let e=(null==(h=(await _.client.api.POST("/api/web/message",{body:{address:w}})).data)?void 0:h.message)||"";await (0,c._)(200),m=await (0,u.l)(b,{message:e});let a=await y.getUserInfo(),s=null==a?void 0:a.authConnection,l=(null==y?void 0:y.connectedConnectorName)==="auth"?s:null==y?void 0:y.connectedConnectorName,f=d.a[l||"metamask"],p=await _.client.api.POST("/api/web/signin-wallet",{body:{address:w,signature:m,baseNickname:r,walletType:f,authCode:t,initialConsent:i,ct:n,pt:o}});return g.setState(e=>({...e,isLoading:!1,isLogin:!0,address:w})),{...p.data,address:w}}catch(e){throw a?g.setState(e=>({...e,isLoading:!1})):g.setState(e=>({...e,isLoading:!1,isLogin:!1,address:void 0})),void 0!==m&&(e.signature=m),e}};var g=r(60815);let b=()=>{let{authConfig:e,isMount:t}=(0,i.u)(),{address:r}=(0,n.useAccount)(),{isLogin:s,isLoading:u,address:l}=(0,g.u)(e.store),{isPreserveAuth:c}=(0,o.Z)(e);return{address:s?l:void 0,isLoading:u,isLogin:s,login:(0,h.useCallback)(async e=>(0,a.login)({...e}),[]),join:(0,h.useCallback)(async e=>m(e),[]),logout:i.l,isReady:t,isPreserveAuth:c,notMatchedLoginAddress:!!s&&!u&&!!r&&!!l&&r!==l}}}