function(e,t,n){"use strict";n.d(t,{u:function(){return O},GG:function(){return W}});var i=n(57437),l=n(56057),a=n(50095),o=n(2265),r=n(78689),d=n(34760),s=n(73390),u=n(25820),c=n(19123),v=n(8217),m=n(10552),f=n(26976),p=n(30910),h=n(2277),y=n(5716),g=n(75486),w=n(39558),b=n(96480),x=n(57600);let I=new x.Pj;var _=n(65027),S=n(16147),k=n.n(S),T=n(49882),N=n(39338),P=n(92526),j=n(92812),C=n.n(j),A=n(58031);function Z(e){let{tokenId:t,tokenType:n}=e,{onReject:S,onClose:j,onResolve:A}=(0,a.Z)(Z),O=(0,r.useTranslations)("modal.sale"),W=(0,r.useTranslations)("validation"),[E,R]=(0,o.useState)(!1),{thumbnailData:F,mintingNo:M,itemId:B,name:G,isLoading:L}=(0,s.Z)({tokenType:n,tokenId:t}),{data:U}=(0,b.ZP)(void 0!==B?[x.Pj.getPricingInfoPath,B]:null,void 0!==B?()=>I.getPricingInfo({itemId:B}):null),X=(0,u.cI)({mode:"all",defaultValues:{price:"0",duration:3}}),{watch:D}=X,q=D("price"),K=(0,N.Z)(q),{finalPriceWei:z,salesCommission:J}=(0,g.Z)(K),{dollar:H}=(0,_.Z)(z),Q=(null==U?void 0:U.currPriceWei)==="0"||(null==U?void 0:U.currPriceWei)===""?void 0:null==U?void 0:U.currPriceWei,V=(null==U?void 0:U.prevPriceWei)==="0"||(null==U?void 0:U.prevPriceWei)===""?void 0:null==U?void 0:U.prevPriceWei,$=(null==U?void 0:U.periodPriceMin)&&(null==U?void 0:U.periodPriceMax)?[(0,m.p7)(null==U?void 0:U.periodPriceMin),(0,m.p7)(null==U?void 0:U.periodPriceMax)]:void 0,Y=null==U?void 0:U.highestBidPriceWei,ee="0"===Y||""===Y?void 0:Y,et=async e=>{if(!E){R(!0);try{let{price:i,duration:l}=e,a=(0,N.Z)(i),{listingTime:o,expirationTime:r}=await (0,c.j)(Number(l));(0,w.re)({itemName:G,tradePrice:a,tradeQuantity:1,itemId:B}),A({tokenId:t,tokenType:n,tokenAmount:(0,m.p7)(a,v.E9),finalPriceWei:z,listingTime:o,expirationTime:r}),j()}catch(e){R(!1)}}};return(0,o.useEffect)(()=>()=>S(),[S]),(0,i.jsx)(l.X,{onClose:j,children:(0,i.jsx)(u.RV,{...X,children:(0,i.jsxs)("form",{onSubmit:X.handleSubmit(et),children:[(0,i.jsx)(l.X.Title,{children:O("title")}),(0,i.jsx)(l.X.ItemThumbWithName,{tokenType:n,thumbnailData:F,mintingNo:M||null,isLoading:L}),(Q&&"0"!==Q||V||$)&&(0,i.jsxs)("div",{className:k()(C().latestPriceBox),children:[(0,i.jsx)("div",{className:C().tooltipBox,children:(0,i.jsx)(h.Z,{darkMode:!0,textAlign:"left",size:20,maxWidth:312,message:(0,i.jsxs)("ul",{className:C().tooltipInner,children:[(0,i.jsx)("p",{className:C().tooltipTitle,children:O("price_info_title")}),(0,i.jsxs)("li",{className:C().priceInfoItem,children:[(0,i.jsxs)("span",{className:C().priceInfoLabel,children:[O("lowest_price")," : "]}),O("lowest_price_desc")]}),(0,i.jsxs)("li",{className:C().priceInfoItem,children:[(0,i.jsxs)("span",{className:C().priceInfoLabel,children:[O("prev_price")," : "]}),O("prev_price_desc")]}),(0,i.jsxs)("li",{className:C().priceInfoItem,children:[(0,i.jsxs)("span",{className:C().priceInfoLabel,children:[O("average_price",{value:14})," : "]}),O("average_price_desc",{value:14})]})]}),marginLeft:!0,placement:"bottom-end"})}),(0,i.jsxs)(d.f,{bgColor:"gray",children:[(0,i.jsx)(d.f.Neso,{label:O("lowest_price"),nesoWei:Q,nesoWeiEmptyText:"No item listed",size:"small"}),(0,i.jsx)(d.f.Neso,{label:O("prev_price"),nesoWei:V,nesoWeiEmptyText:"No trade history",size:"small"}),(0,i.jsx)(d.f.Neso,{label:(0,i.jsx)("span",{className:(0,y.A)({display:"flex",alignItems:"center"}),children:O("average_price",{value:14})}),nesoWei:$,nesoWeiEmptyText:"No trade history",isShorten:!0,size:"small"})]}),!!ee&&(0,i.jsx)(d.f,{bgColor:"opacity",className:C().highestBidPrice,marginTop:12,children:(0,i.jsx)(d.f.Neso,{label:(0,i.jsxs)("div",{className:C().highestBidPriceLabel,children:[(0,i.jsxs)("div",{className:C().label,children:[O("highest_bid_price",{value:14}),(0,i.jsx)(h.Z,{textAlign:"center",size:16,maxWidth:328,message:O("highest_bid_price_information"),placement:"bottom"})]}),(0,i.jsx)(P.Z,{variant:"AccentLimeOutlined",size:"tiny",mode:"link",href:"/bid/".concat(B),target:"_blank",className:C().quickSellButton,children:O("button_quick_sell")})]}),nesoWei:ee,isShorten:!0,size:"small"})})]}),(0,i.jsx)(l.X.PriceInput,{marginTop:32,marginBottom:8,label:O("price_input_label"),rules:{validate:e=>(0,T.T1)(e||0,f.lu)?W("max_price_validation",{value:f.lu,symbol:p.y2}):(0,T.FI)(e||0,f.GX)?W("min_price_validation",{value:f.GX,symbol:p.y2}):void 0}}),(0,i.jsx)(l.X.SelectInput,{size:"large",label:O("duration_input_label"),defaultValue:3,options:[{label:"3 Days",value:3},{label:"5 Days",value:5},{label:"7 Days",value:7},{label:"14 Days",value:14}]}),(0,i.jsxs)(d.f,{bgColor:"black",borderColor:"orange",isShadow:!0,marginTop:24,children:[(0,i.jsx)(d.f.Fee,{fee:J&&J/100}),(0,i.jsx)(d.f.Neso,{label:O("final_price"),nesoWei:z,dollar:H,size:"large"})]}),(0,i.jsx)(l.X.Footer,{modalType:"content",children:(0,i.jsx)(l.X.SubmitButton,{isLoading:E,btnType:"orange",style:{flex:1},children:O("submit_btn")})})]})})})}let O="sale-form",W=e=>(0,A.y)(Z)({props:e,id:O})}